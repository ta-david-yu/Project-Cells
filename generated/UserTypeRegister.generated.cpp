//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by DYEditorCodeGenerator.
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
#include "Type/UserTypeRegister.h"

#include "Type/TypeRegistry.h"
#include "Serialization/SerializedObjectFactory.h"
#include "ImGui/ImGuiUtil.h"

// Insert user headers here...
#include "include/_Sandbox/ExampleComponent.h"
#include "include/_Sandbox/ExampleSystem.h"
#include "include/_Sandbox/SpawnBoxOnMouseButtonSystem.h"
#include "include/_Sandbox/SpawnBoxOnMouseButtonComponent.h"
#include "include/_Sandbox/AudioPlayerSystem.h"


namespace DYE::DYEditor
{
	/// A helper function that helps updating context data after a DrawControl call.
	/// Used by DrawInspector functions mostly.
	inline void updateContextAfterDrawControlCall(DrawComponentInspectorContext &context)
	{
		context.IsModificationActivated |= ImGuiUtil::IsControlActivated();
		context.IsModificationDeactivated |= ImGuiUtil::IsControlDeactivated();
		context.IsModificationDeactivatedAfterEdit |= ImGuiUtil::IsControlDeactivatedAfterEdit();
	}

	void userRegisterTypeFunction()
	{
		// Insert user type registration here...

		// Component located in include/_Sandbox/ExampleComponent.h
		TypeRegistry::RegisterComponentType<DYE::DYEditor::Template::ExampleComponent>
			(
				"Example Component",
				ComponentTypeDescriptor
					{
						.Serialize = [](Entity& entity, SerializedComponent& serializedComponent)
						{
							auto const& component = entity.GetComponent<DYE::DYEditor::Template::ExampleComponent>();
							serializedComponent.SetPrimitiveTypePropertyValue("IntegerVariable", component.IntegerVariable);
							return SerializationResult {};
						},
						.Deserialize = [](SerializedComponent& serializedComponent, DYE::DYEditor::Entity& entity)
						{
							auto& component = entity.AddOrGetComponent<DYE::DYEditor::Template::ExampleComponent>();
							component.IntegerVariable = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Int32>("IntegerVariable");
							return DeserializationResult {};
						},
						.DrawInspector = [](DrawComponentInspectorContext &drawInspectorContext, Entity &entity)
						{
							bool changed = false;
							auto& component = entity.GetComponent<DYE::DYEditor::Template::ExampleComponent>();
							changed |= ImGuiUtil::DrawIntControl("IntegerVariable", component.IntegerVariable); updateContextAfterDrawControlCall(drawInspectorContext);
							return changed;
						}
					}
			);

		// Component located in include/_Sandbox/ExampleComponent.h
		TypeRegistry::RegisterComponentType<DYE::DYEditor::Template::ComponentWithAllPrimitiveProperties>
			(
				"ComponentWithAllPrimitiveProperties",
				ComponentTypeDescriptor
					{
						.Serialize = [](Entity& entity, SerializedComponent& serializedComponent)
						{
							auto const& component = entity.GetComponent<DYE::DYEditor::Template::ComponentWithAllPrimitiveProperties>();
							std::string CharVar(" "); CharVar[0] = component.CharVar; serializedComponent.SetPrimitiveTypePropertyValue("CharVar", CharVar);							serializedComponent.SetPrimitiveTypePropertyValue("BoolVar", component.BoolVar);
							serializedComponent.SetPrimitiveTypePropertyValue("Int32Var", component.Int32Var);
							serializedComponent.SetPrimitiveTypePropertyValue("FloatVar", component.FloatVar);
							serializedComponent.SetPrimitiveTypePropertyValue("Vector2Var", component.Vector2Var);
							serializedComponent.SetPrimitiveTypePropertyValue("Vector3Var", component.Vector3Var);
							serializedComponent.SetPrimitiveTypePropertyValue("Vector4Var", component.Vector4Var);
							serializedComponent.SetPrimitiveTypePropertyValue("Color4Var", component.Color4Var);
							serializedComponent.SetPrimitiveTypePropertyValue("StringVar", component.StringVar);
							serializedComponent.SetPrimitiveTypePropertyValue("QuaternionVar", component.QuaternionVar);
							return SerializationResult {};
						},
						.Deserialize = [](SerializedComponent& serializedComponent, DYE::DYEditor::Entity& entity)
						{
							auto& component = entity.AddOrGetComponent<DYE::DYEditor::Template::ComponentWithAllPrimitiveProperties>();
							component.CharVar = serializedComponent.GetPrimitiveTypePropertyValueOr<const char*>("CharVar", "a")[0];
							component.BoolVar = serializedComponent.GetPrimitiveTypePropertyValueOr<Bool>("BoolVar", false);
							component.Int32Var = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Int32>("Int32Var");
							component.FloatVar = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Float>("FloatVar");
							component.Vector2Var = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Vector2>("Vector2Var");
							component.Vector3Var = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Vector3>("Vector3Var");
							component.Vector4Var = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Vector4>("Vector4Var");
							component.Color4Var = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Color4>("Color4Var");
							component.StringVar = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<String>("StringVar");
							component.QuaternionVar = serializedComponent.GetPrimitiveTypePropertyValueOrDefault<Quaternion>("QuaternionVar");
							return DeserializationResult {};
						},
						.DrawInspector = [](DrawComponentInspectorContext &drawInspectorContext, Entity &entity)
						{
							bool changed = false;
							auto& component = entity.GetComponent<DYE::DYEditor::Template::ComponentWithAllPrimitiveProperties>();
							changed |= ImGuiUtil::DrawCharControl("CharVar", component.CharVar); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawBoolControl("BoolVar", component.BoolVar); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawIntControl("Int32Var", component.Int32Var); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawFloatControl("FloatVar", component.FloatVar); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawVector2Control("Vector2Var", component.Vector2Var); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawVector3Control("Vector3Var", component.Vector3Var); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawVector4Control("Vector4Var", component.Vector4Var); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawColor4Control("Color4Var", component.Color4Var); updateContextAfterDrawControlCall(drawInspectorContext);
							changed |= ImGuiUtil::DrawTextControl("StringVar", component.StringVar); updateContextAfterDrawControlCall(drawInspectorContext);
							// 'QuaternionVar' : Quaternion 
							{
								glm::vec3 eulerDegree = glm::eulerAngles(component.QuaternionVar);
								eulerDegree += glm::vec3(0.f); eulerDegree = glm::degrees(eulerDegree);
								if (ImGuiUtil::DrawVector3Control("QuaternionVar", eulerDegree))
								{
									eulerDegree.y = glm::clamp(eulerDegree.y, -90.f, 90.f);
									component.QuaternionVar = glm::quat (glm::radians(eulerDegree));
									changed = true;
								}
								updateContextAfterDrawControlCall(drawInspectorContext);
							}
							return changed;
						}
					}
			);

		// Component located in include/_Sandbox/SpawnBoxOnMouseButtonComponent.h
		TypeRegistry::RegisterComponentType<DYE::DYEditor::SpawnBoxOnMouseButtonComponent>
			(
				"Spawn Box On Mouse Button",
				ComponentTypeDescriptor
					{
						.Serialize = [](Entity& entity, SerializedComponent& serializedComponent)
						{
							auto const& component = entity.GetComponent<DYE::DYEditor::SpawnBoxOnMouseButtonComponent>();
							serializedComponent.SetPrimitiveTypePropertyValue("BoxColor", component.BoxColor);
							return SerializationResult {};
						},
						.Deserialize = [](SerializedComponent& serializedComponent, DYE::DYEditor::Entity& entity)
						{
							auto& component = entity.AddOrGetComponent<DYE::DYEditor::SpawnBoxOnMouseButtonComponent>();
							component.BoxColor = serializedComponent.GetPrimitiveTypePropertyValueOr<Color4>("BoxColor", {1, 1, 1, 1});
							return DeserializationResult {};
						},
						.DrawInspector = [](DrawComponentInspectorContext &drawInspectorContext, Entity &entity)
						{
							bool changed = false;
							auto& component = entity.GetComponent<DYE::DYEditor::SpawnBoxOnMouseButtonComponent>();
							changed |= ImGuiUtil::DrawColor4Control("BoxColor", component.BoxColor); updateContextAfterDrawControlCall(drawInspectorContext);
							return changed;
						}
					}
			);

		// System located in include/_Sandbox/ExampleSystem.h
		static DYE::DYEditor::Template::ExampleSystem _ExampleSystem;
		TypeRegistry::RegisterSystem("Example System", &_ExampleSystem);

		// System located in include/_Sandbox/ExampleSystem.h
		static DYE::DYEditor::Template::MousePositionInCameraSpaceImGuiSystem _MousePositionInCameraSpaceImGuiSystem;
		TypeRegistry::RegisterSystem("Mouse Position In Camera Space System", &_MousePositionInCameraSpaceImGuiSystem);

		// System located in include/_Sandbox/SpawnBoxOnMouseButtonSystem.h
		static DYE::DYEditor::SpawnBoxOnMouseButtonSystem _SpawnBoxOnMouseButtonSystem;
		TypeRegistry::RegisterSystem("Spawn Box On Mouse Button System", &_SpawnBoxOnMouseButtonSystem);

		// System located in include/_Sandbox/AudioPlayerSystem.h
		static DYE::DYEditor::AudioPlayerSystem _AudioPlayerSystem;
		TypeRegistry::RegisterSystem("Audio Player System", &_AudioPlayerSystem);

	}

	class UserTypeRegister_Generated
	{
	public:
		UserTypeRegister_Generated()
		{
			DYE::DYEditor::AssignRegisterUserTypeFunctionPointer(userRegisterTypeFunction);
		}
	};

	[[maybe_unused]]
	static UserTypeRegister_Generated userTypeRegister_GeneratedInstance = UserTypeRegister_Generated();
}
